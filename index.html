<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hydro-Hustle</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(skyblue, #87ceeb);
      height: 100vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #game-container {
      position: relative;
      width: 100%;
      max-width: 800px;
      height: 90vh;
      border: 3px solid #444;
      border-radius: 10px;
      margin-top: 10px;
      display: flex;
      flex-direction: row; /* Place children side by side */
      justify-content: space-between; /* Space out timer/score and well */
      align-items: flex-start;
      padding: 20px;
      background-color: #c7f0d8;
    }

    #timer {
      position: absolute;
      top: 10px;
      left: 10px;
      font-size: 24px;
      font-weight: bold;
      background: white;
      padding: 8px 12px;
      border-radius: 5px;
    }

    #score {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 24px;
      font-weight: bold;
      background: white;
      padding: 8px 12px;
      border-radius: 5px;
    }

    #logo-bar {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 10;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 200px;
      pointer-events: none; /* Let clicks pass through */
    }
    #logo-bar img {
      width: 180px;
      height: auto;
      display: block;
    }

    #left-panel {
      display: flex;
      flex-direction: column;
      flex: 1;
      justify-content: flex-end; /* Move content to the bottom */
      height: 100%;
    }

    #well {
      /* The well is now an image, so we remove the background and border styles */
      width: 300px;
      height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      margin-top: 120px; /* Increased to move the well lower on the screen */
      margin-right: 10px;
    }

    #bucket-row {
      display: flex;
      gap: 10px;
      margin-top: 40px; /* Add space above the buckets */
      margin-bottom: 10px; /* Add space from the bottom */
      align-items: flex-end;
    }

    .bucket {
      /* Only add a yellow outline when selected. No background, border, or border-radius. */
      width: 80px;
      height: 80px;
      cursor: pointer;
    }

    .bucket.selected {
      outline: 3px solid yellow;
    }

    .disabled {
      pointer-events: none;
      opacity: 0.5;
    }

    #game-over {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      text-align: center;
      border-radius: 10px;
      display: none;
    }

    #game-over h2 {
      margin-bottom: 20px;
    }

    #reset-btn {
      padding: 10px 20px;
      font-size: 16px;
      background: #28a745;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    /* New styles for centered characters */
    #center-characters {
      /* Place characters above the buckets, not in the center of the screen */
      display: flex;
      gap: 10px;
      margin-bottom: 20px; /* Space between characters and buckets */
      justify-content: flex-start;
      align-items: center;
      position: static; /* Not absolute anymore */
    }

    #center-characters img {
      width: 95px; /* Increased size for both images */
      height: auto;
      pointer-events: none; /* Allow clicks to pass through images */
    }
  </style>
</head>
<body>
  <div id="game-container">
    <!-- Logo at the top center between timer and score -->
    <div id="logo-bar">
      <img src="img/cw_logo_horizontal.png" alt="Charity: Water Logo" />
    </div>
    <!-- Left panel for timer, score, characters, buckets, and game over -->
    <div id="left-panel">
      <div id="timer">Time: 30</div>
      <div id="score">Score: 0</div>
      <!-- Characters are now just above the buckets -->
      <div id="center-characters">
        <img src="img/psnimg.png" alt="Person 1" />
        <img src="img/psntimg.png" alt="Person 2" />
      </div>
      <div id="bucket-row"></div>
      <div id="game-over">
        <h2>Game Over!</h2>
        <button id="reset-btn">Play Again</button>
      </div>
    </div>
    <!-- Well image on the right -->
    <div id="well">
      <img src="img/wellimg.png" alt="Well" style="width: 100%; height: 100%; object-fit: contain;" />
    </div>
  </div>

  <script>
    const bucketRow = document.getElementById('bucket-row');
    const well = document.getElementById('well');
    const timerDisplay = document.getElementById('timer');
    const scoreDisplay = document.getElementById('score');
    const gameOverScreen = document.getElementById('game-over');
    const resetButton = document.getElementById('reset-btn');

    let selectedBucket = null;
    let score = 0;
    let timeLeft = 30;
    let timer;

    function createBuckets() {
      bucketRow.innerHTML = '';
      for (let i = 0; i < 5; i++) {
        // Create an image for the bucket
        const bucket = document.createElement('img');
        bucket.src = 'img/bctimg.png'; // Use the bucket image from the img folder
        bucket.alt = 'Bucket';
        bucket.classList.add('bucket');
        bucket.style.width = '80px';
        bucket.style.height = '80px';
        bucket.style.objectFit = 'contain';
        // Add click event to select the bucket
        bucket.addEventListener('click', () => {
          if (selectedBucket || timeLeft <= 0) return;
          bucket.classList.add('selected');
          selectedBucket = bucket;
        });
        bucketRow.appendChild(bucket);
      }
    }

    function startGame() {
      score = 0;
      timeLeft = 30;
      selectedBucket = null;
      scoreDisplay.textContent = 'Score: 0';
      timerDisplay.textContent = 'Time: 30';
      gameOverScreen.style.display = 'none';
      bucketRow.classList.remove('disabled');
      createBuckets();

      well.addEventListener('click', handleWellClick);

      clearInterval(timer);
      timer = setInterval(() => {
        timeLeft--;
        timerDisplay.textContent = `Time: ${timeLeft}`;
        if (timeLeft <= 0) {
          endGame();
        }
      }, 1000);
    }

    function handleWellClick() {
      if (!selectedBucket || timeLeft <= 0) return;
      score += 10;
      scoreDisplay.textContent = `Score: ${score}`;
      selectedBucket.remove();
      selectedBucket = null;
      if (bucketRow.children.length === 0) {
        createBuckets();
      }
    }

    function endGame() {
      clearInterval(timer);
      gameOverScreen.style.display = 'block';
      bucketRow.classList.add('disabled');
    }

    resetButton.addEventListener('click', () => {
      startGame();
    });

    // Start game on load
    startGame();
  </script>
</body>
</html>
